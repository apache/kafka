# Licensed to the Apache Software Foundation (ASF) under one or more
# contributor license agreements.  See the NOTICE file distributed with
# this work for additional information regarding copyright ownership.
# The ASF licenses this file to You under the Apache License, Version 2.0
# (the "License"); you may not use this file except in compliance with
# the License.  You may obtain a copy of the License at
#
#    http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

# Unspecified loggers and loggers with additivity=true output to server.log and stdout
# Note that INFO only applies to unspecified loggers, the log level of the child logger is used otherwise
name=LogConfig
appenders=stdout,kafkaAppender,stateChangeAppender,requestAppender,cleanerAppender,controllerAppender,authorizerAppender

# Console appender (stdout)
appender.stdout.type=Console
appender.stdout.name=STDOUT
appender.stdout.layout.type=PatternLayout
appender.stdout.layout.pattern=[%d] %p %m (%c)%n

appender.kafkaAppender.type=RollingFile
appender.kafkaAppender.name=KafkaAppender
appender.kafkaAppender.fileName=${kafka.logs.dir}/server.log
appender.kafkaAppender.filePattern=${kafka.logs.dir}/server.log.%d{yyyy-MM-dd-HH}
appender.kafkaAppender.layout.type=PatternLayout
appender.kafkaAppender.layout.pattern=[%d] %p %m (%c)%n
appender.kafkaAppender.policies.type=TimeBasedTriggeringPolicy
appender.kafkaAppender.policies.interval=1
appender.kafkaAppender.policies.modulate=true

# State Change appender
appender.stateChangeAppender.type=RollingFile
appender.stateChangeAppender.name=StateChangeAppender
appender.stateChangeAppender.fileName=${kafka.logs.dir}/state-change.log
appender.stateChangeAppender.filePattern=${kafka.logs.dir}/state-change.log.%d{yyyy-MM-dd-HH}
appender.stateChangeAppender.layout.type=PatternLayout
appender.stateChangeAppender.layout.pattern=[%d] %p %m (%c)%n
appender.stateChangeAppender.policies.type=TimeBasedTriggeringPolicy
appender.stateChangeAppender.policies.interval=1
appender.stateChangeAppender.policies.modulate=true

# Request appender
appender.requestAppender.type=RollingFile
appender.requestAppender.name=RequestAppender
appender.requestAppender.fileName=${kafka.logs.dir}/kafka-request.log
appender.requestAppender.filePattern=${kafka.logs.dir}/kafka-request.log.%d{yyyy-MM-dd-HH}
appender.requestAppender.layout.type=PatternLayout
appender.requestAppender.layout.pattern=[%d] %p %m (%c)%n
appender.requestAppender.policies.type=TimeBasedTriggeringPolicy
appender.requestAppender.policies.interval=1
appender.requestAppender.policies.modulate=true

# Cleaner appender
appender.cleanerAppender.type=RollingFile
appender.cleanerAppender.name=CleanerAppender
appender.cleanerAppender.fileName=${kafka.logs.dir}/log-cleaner.log
appender.cleanerAppender.filePattern=${kafka.logs.dir}/log-cleaner.log.%d{yyyy-MM-dd-HH}
appender.cleanerAppender.layout.type=PatternLayout
appender.cleanerAppender.layout.pattern=[%d] %p %m (%c)%n
appender.cleanerAppender.policies.type=TimeBasedTriggeringPolicy
appender.cleanerAppender.policies.interval=1
appender.cleanerAppender.policies.modulate=true

# Controller appender
appender.controllerAppender.type=RollingFile
appender.controllerAppender.name=ControllerAppender
appender.controllerAppender.fileName=${kafka.logs.dir}/controller.log
appender.controllerAppender.filePattern=${kafka.logs.dir}/controller.log.%d{yyyy-MM-dd-HH}
appender.controllerAppender.layout.type=PatternLayout
appender.controllerAppender.layout.pattern=[%d] %p %m (%c)%n
appender.controllerAppender.policies.type=TimeBasedTriggeringPolicy
appender.controllerAppender.policies.interval=1
appender.controllerAppender.policies.modulate=true

# Authorizer appender
appender.authorizerAppender.type=RollingFile
appender.authorizerAppender.name=AuthorizerAppender
appender.authorizerAppender.fileName=${kafka.logs.dir}/kafka-authorizer.log
appender.authorizerAppender.filePattern=${kafka.logs.dir}/kafka-authorizer.log.%d{yyyy-MM-dd-HH}
appender.authorizerAppender.layout.type=PatternLayout
appender.authorizerAppender.layout.pattern=[%d] %p %m (%c)%n
appender.authorizerAppender.policies.type=TimeBasedTriggeringPolicy
appender.authorizerAppender.policies.interval=1
appender.authorizerAppender.policies.modulate=true

rootLogger.level=INFO
rootLogger.appenderRefs=stdout,kafkaAppender
rootLogger.appenderRef.stdout.ref=STDOUT
rootLogger.appenderRef.kafkaAppender.ref=KafkaAppender

loggers=zookeeper,kafka,apacheKafka,requestLogger,networkRequestChannel,apacheKafkaController,kafkaController,logCleaner,stateChangeLogger,authorizerLogger

# Zookeeper logger
logger.zookeeper.name=org.apache.zookeeper
logger.zookeeper.level=INFO

# Kafka logger
logger.kafka.name=kafka
logger.kafka.level=INFO

# Kafka org.apache logger
logger.apacheKafka.name=org.apache.kafka
logger.apacheKafka.level=INFO

# Kafka request logger
logger.requestLogger.name=kafka.request.logger
logger.requestLogger.level=WARN
logger.requestLogger.additivity=false
logger.requestLogger.appenderRef.requestAppender.ref=RequestAppender


# Uncomment the lines below and change log4j.logger.kafka.network.RequestChannel$ to TRACE for additional output
# related to the handling of requests
#loggers=zookeeper,kafka,apacheKafka,requestLogger,networkRequestChannel,apacheKafkaController,kafkaController,logCleaner,stateChangeLogger,authorizerLogger,networkProcessor,serverKafkaApis
#logger.networkProcessor.name=kafka.network.Processor
#logger.networkProcessor.level=TRACE
#logger.networkProcessor.appenderRef.requestAppender.ref=RequestAppender
#logger.serverKafkaApis.name=kafka.server.KafkaApis
#logger.serverKafkaApis.level=TRACE
#logger.serverKafkaApis.additivity=false
#logger.serverKafkaApis.appenderRef.requestAppender.ref=RequestAppender

# Kafka network RequestChannel$ logger
logger.networkRequestChannel.name=kafka.network.RequestChannel$
logger.networkRequestChannel.level=WARN
logger.networkRequestChannel.additivity=false
logger.networkRequestChannel.appenderRef.requestAppender.ref=RequestAppender

# KRaft mode controller logger
logger.apacheKafkaController.name=org.apache.kafka.controller
logger.apacheKafkaController.level=INFO
logger.apacheKafkaController.additivity=false
logger.apacheKafkaController.appenderRef.controllerAppender.ref=ControllerAppender

# ZK mode controller logger
logger.kafkaController.name=kafka.controller
logger.kafkaController.level=TRACE
logger.kafkaController.additivity=false
logger.kafkaController.appenderRef.controllerAppender.ref=ControllerAppender

# LogCleaner logger
logger.logCleaner.name=kafka.log.LogCleaner
logger.logCleaner.level=INFO
logger.logCleaner.additivity=false
logger.logCleaner.appenderRef.cleanerAppender.ref=CleanerAppender

# State change logger
logger.stateChangeLogger.name=state.change.logger
logger.stateChangeLogger.level=INFO
logger.stateChangeLogger.additivity=false
logger.stateChangeLogger.appenderRef.stateChangeAppender.ref=StateChangeAppender

# Authorizer logger
logger.authorizerLogger.name=kafka.authorizer.logger
logger.authorizerLogger.level=INFO
logger.authorizerLogger.additivity=false
logger.authorizerLogger.appenderRef.authorizerAppender.ref=AuthorizerAppender
